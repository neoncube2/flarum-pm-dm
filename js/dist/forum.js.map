{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://flarum-private-messages/webpack/bootstrap","webpack://flarum-private-messages/webpack/runtime/compat get default export","webpack://flarum-private-messages/webpack/runtime/define property getters","webpack://flarum-private-messages/webpack/runtime/hasOwnProperty shorthand","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/app']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/extend']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/Model']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://flarum-private-messages/./src/forum/models/Message.js","webpack://flarum-private-messages/./src/forum/models/Conversation.js","webpack://flarum-private-messages/./src/forum/models/ConversationUser.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/models/User']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Page']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Button']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/Component']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/username']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://flarum-private-messages/./src/forum/components/MessageText.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://flarum-private-messages/./src/forum/components/ConversationView.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/userOnline']\"","webpack://flarum-private-messages/./src/forum/components/UserListItem.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Modal']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/Search']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://flarum-private-messages/./src/forum/components/UserSearchSource.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/classList']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/extract']\"","webpack://flarum-private-messages/./src/forum/components/RecipientSearch.js","webpack://flarum-private-messages/./src/forum/components/recipientLabel.js","webpack://flarum-private-messages/./src/forum/components/StartConversationModal.js","webpack://flarum-private-messages/./src/forum/components/ConversationsList.js","webpack://flarum-private-messages/./src/forum/components/ConversationsPage.js","webpack://flarum-private-messages/./src/forum/components/ConversationViewPage.js","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://flarum-private-messages/./src/forum/components/PrivateMessageReceivedNotification.js","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/NotificationsDropdown']\"","webpack://flarum-private-messages/./src/forum/components/ConversationsDropdown.js","webpack://flarum-private-messages/./src/forum/index.js","webpack://flarum-private-messages/./src/forum/addConversationsDropdown.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Message extends mixin(Model, {\n  message: Model.attribute('message'),\n  user: Model.hasOne('user'),\n  isHidden: Model.attribute('isHidden'),\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  conversation: Model.hasOne('conversation'),\n  number: Model.hasOne('number'),\n}) {\n  apiEndpoint() {\n    return `/neoncube-private-messages/messages${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Conversation extends mixin(Model, {\n  messages: Model.hasMany('messages'),\n  recipients: Model.hasMany('recipients'),\n  totalMessages: Model.attribute('totalMessages'),\n  notNew: Model.attribute('notNew'),\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  updatedAt: Model.attribute('updatedAt', Model.transformDate),\n}) {\n  apiEndpoint() {\n    return `/neoncube-private-messages/conversations${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class ConversationUser extends mixin(Model, {\n  conversation: Model.hasOne('conversation'),\n  user: Model.hasOne('user'),\n\n  userId: Model.attribute('userId'),\n  conversationId: Model.attribute('conversationId'),\n  lastRead: Model.attribute('lastRead'),\n}) {}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import Component from 'flarum/common/Component';\n\nexport default class MessageText extends Component {\n  static initAttrs(attrs) {\n    attrs.className ??= '';\n    attrs.content ??= '';\n    attrs.preview ??= false;\n  }\n\n  view() {\n    return <div className={this.attrs.className} />;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    if (this.attrs.preview) {\n      let preview;\n      const updatePreview = () => {\n        const content = this.attrs.content;\n\n        if (preview === content) return;\n\n        preview = content;\n\n        s9e.TextFormatter.preview(content || '', vnode.dom);\n      };\n      updatePreview();\n\n      this.updateInterval = setInterval(updatePreview, 50);\n    } else {\n      s9e.TextFormatter.preview(this.attrs.content, vnode.dom);\n    }\n  }\n\n  onremove() {\n    clearInterval(this.updateInterval);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport MessageText from './MessageText';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport icon from 'flarum/common/helpers/icon';\nimport app from 'flarum/forum/app';\n\nexport default class ConversationView extends Component {\n  oninit(vnode) {\n    this.loading = true;\n    this.vnode = vnode;\n    this.idParam = m.route.param('id');\n    this.firstLoad = true;\n\n    this.typingTimeout = true;\n\n    this.sendTimeout = true;\n\n    const typingTimeoutInterval = () => {\n      this.typingTimeout = true;\n      setTimeout(() => {\n        typingTimeoutInterval();\n      }, 5000);\n    };\n\n    const typingInterval = () => {\n      if (this.typingTime < new Date(Date.now() - 6000)) {\n        this.typing = false;\n        m.redraw();\n      }\n      setTimeout(() => {\n        typingInterval();\n      }, 6000);\n    };\n\n    this.sendTimeoutInterval = () => {\n      if (this.timer === 0) {\n        this.sendTimeout = true;\n        m.redraw();\n        return;\n      }\n      this.timer--;\n      if (this.timer >= 0) {\n        setTimeout(() => {\n          this.sendTimeoutInterval();\n        }, 1000);\n      }\n    };\n\n    typingTimeoutInterval();\n    typingInterval();\n\n    this.typing = false;\n\n    this.conversation ??= vnode.attrs.conversation;\n    this.initPost();\n  }\n\n  initPost() {\n    this.newMessageCount = 0;\n\n    this.load();\n\n    this.messageContent = Stream('');\n\n    return new Promise(() => {\n      setTimeout(() => {\n        $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 1000);\n      }, 500);\n    });\n  }\n\n  onremove() {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        channels.user.unbind('typing');\n        channels.user.unbind('newMessage');\n      });\n    }\n  }\n\n  onupdate() {\n    $('.chat-history').scroll(() => {\n      if (!this.notNew) {\n        const pos = $('.chat-history').scrollTop();\n        if (pos === 0) {\n          const firstMsg = $('.message-content:first');\n          this.getMessages(app.cache.messages[this.conversation.id()].length);\n          if (!this.notNew) {\n            $('.chat-history').scrollTop(firstMsg.offset().top);\n          }\n        }\n      }\n    });\n  }\n\n  onbeforeupdate() {\n    $('.UserListItem')\n      .off('click')\n      .on('click', (e) => {\n        this.conversation = app.cache.conversations[$(e.currentTarget).attr('id')];\n        this.index = $(e.currentTarget).attr('id');\n        this.notNew = false;\n        this.cipher = null;\n        this.oninit(this.vnode);\n        m.redraw();\n      });\n\n    $('#MessageTextArea')\n      .off()\n      .on('keydown', (e) => {\n        console.log(app.forum);\n\n        if (e.keyCode === 13 && app.forum.attribute('neoncubePrivateMessagesReturnKey')) {\n          $('#MessageTextArea').prop('disabled', true);\n          this.sendMessage();\n        }\n      });\n  }\n\n  oncreate() {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        channels.user.bind('newMessage', (data) => {\n          if (\n            parseInt(data.conversationId) === parseInt(this.conversation.id()) &&\n            $('.MessagesDropdown').children('.Dropdown-menu').is(':visible')\n          ) {\n            const message = {\n              id: Stream(data.id),\n              message: Stream(data.message),\n              user: Stream(this.user),\n              createdAt: Stream(data.createdAt),\n            };\n            this.decryptMessages([message]);\n            this.newMessageCount++;\n            this.typing = false;\n            m.redraw();\n            $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 1000);\n          }\n        });\n\n        channels.user.bind('typing', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            const list = $('.chat-history');\n\n            const scrollMore = list.scrollTop() + list.innerHeight() >= list[0].scrollHeight - 50;\n\n            this.typing = true;\n            this.typingTime = new Date();\n            m.redraw();\n\n            if (scrollMore) {\n              list.animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 400);\n            }\n          }\n        });\n\n        channels.user.bind('readMessage', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            this.recipient.lastRead = m.prop(data.number);\n            m.redraw();\n          }\n        });\n      });\n    }\n  }\n\n  view() {\n    const messages = app.cache.messages ? app.cache.messages[this.conversation.id()] : [];\n    return (\n      <div style={this.idParam && this.isMobile() ? 'width: 100%' : ''} className=\"chat\">\n        <div className=\"chat-header clearfix\">\n          {avatar(this.user)}\n\n          <div className=\"chat-about\">\n            <div className=\"chat-with\">{app.translator.trans('neoncube-private-messages.forum.chat.chat_with', { username: username(this.user) })}</div>\n            <div className=\"chat-num-messages\">\n              {app.translator.trans(\n                'neoncube-private-messages.forum.chat.messages_' + (parseInt(this.conversation.totalMessages()) > 1 ? 'multiple' : 'single'),\n                { count: this.conversation.totalMessages() + this.newMessageCount }\n              )}\n            </div>\n          </div>\n        </div>\n\n        {messages?.length > 0 && !this.loading ? (\n          [\n            <div className=\"chat-history\">\n              <ul>\n                {this.notNew ? <li className=\"startConvo\">{app.translator.trans('neoncube-private-messages.forum.chat.start_of_conversation')}</li> : ''}\n                {messages\n                  ? messages\n                    .filter((message, index, self) => index === self.findIndex((t) => t.message() === message.message()))\n                    .sort((a, b) => {\n                      return a.createdAt() - b.createdAt();\n                    })\n                    .map((message, i) => {\n                      const myMessage = parseInt(message.user().id()) === parseInt(app.session.user.id());\n                      return (\n                        <li className=\"clearfix message-content\">\n                          <div className={'message-data ' + (myMessage ? 'align-right' : '')}>\n                            <div className={'avatar-inline ' + (myMessage ? 'me' : 'other')}>\n                              {avatar(myMessage ? app.session.user : message.user())}\n                            </div>\n                            <span className=\"message-data-name\">{username(myMessage ? app.session.user : message.user())}</span>\n                            <span className=\"message-data-time\">{humanTime(message.createdAt())}</span>\n                          </div>\n                          <MessageText\n                            content={message.message()}\n                            className={'message ' + (myMessage ? 'my-message float-right' : 'other-message')}\n                          />\n                          {myMessage ? (\n                            parseInt(this.recipient.lastRead()) >= parseInt(message.data.attributes.number) ? (\n                              <span className=\"message-read\">{icon('fas fa-check')}</span>\n                            ) : (\n                              ''\n                            )\n                          ) : (\n                            ''\n                          )}\n                        </li>\n                      );\n                    })\n                  : ''}\n                {this.messageContent() ? (\n                  <li>\n                    <MessageText content={this.messageContent()} className={'message my-message float-right message-preview'} preview={true} />\n                  </li>\n                ) : (\n                  ''\n                )}\n                {this.typing ? (\n                  <li>\n                    <div className=\"tiblock\">\n                      <div className=\"tidot\"></div>\n                      <div className=\"tidot\"></div>\n                      <div className=\"tidot\"></div>\n                    </div>\n                  </li>\n                ) : (\n                  ''\n                )}\n              </ul>\n            </div>,\n          ]\n        ) : (\n          <LoadingIndicator display=\"block\" size=\"medium\" />\n        )}\n\n        <form className=\"chat-message clearfix\">\n          <textarea\n            id=\"MessageTextArea\"\n            value={this.messageContent()}\n            oninput={withAttr('value', this.typingPush.bind(this))}\n            placeholder={app.translator.trans('neoncube-private-messages.forum.chat.text_placeholder')}\n            rows=\"3\"\n          ></textarea>\n\n          {Button.component(\n            {\n              onclick: this.sendMessage.bind(this),\n              className: 'Button Button--primary',\n              disabled: !this.messageContent() || !this.sendTimeout,\n            },\n            app.translator.trans('neoncube-private-messages.forum.chat.send')\n          )}\n        </form>\n      </div>\n    );\n  }\n\n  typingPush(value) {\n    this.messageContent(value);\n    m.redraw();\n    if (this.typingTimeout) {\n      app\n        .request({\n          method: 'POST',\n          url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/typing',\n          body: {\n            conversationId: this.conversation.id(),\n            userId: this.user.id(),\n          },\n        })\n        .then(() => {\n          this.typingTimeout = false;\n        });\n    }\n  }\n\n  sendMessage() {\n    if (!this.sendTimeout || this.messageContent() === '' || !this.messageContent().replace(/\\s/g, '').length) return;\n\n    this.sendTimeout = false;\n    this.timer = 1;\n    this.sendTimeoutInterval();\n    this.newMessageCount++;\n    app.store\n      .createRecord('messages')\n      .save({\n        messageContents: this.messageContent(),\n        conversationId: this.conversation.id(),\n      })\n      .then((message) => {\n        app.cache.messages[this.conversation.id()].push(message);\n        m.redraw();\n        this.messageContent('');\n        $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 500);\n        app.request({\n          method: 'POST',\n          url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/read',\n          body: {\n            conversationId: this.conversation.id(),\n            messageId: message.id(),\n          },\n        });\n      });\n  }\n\n  getMessages(offset = 0) {\n    if (this.notNew) return;\n\n    app.store\n      .find('neoncube-private-messages/messages', this.conversation.id(), { offset })\n      .then((results) => {\n        delete results.payload;\n        if (this.firstLoad) {\n          const oldNumber = this.meRecipient.lastRead();\n          app\n            .request({\n              method: 'POST',\n              url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/read',\n              body: {\n                conversationId: this.conversation.id(),\n                messageId: results[0].id(),\n              },\n            })\n            .then((response) => {\n              const newNumber = response.data.attributes.lastRead;\n              const lastUnreadMessage = app.session.user.unreadMessages();\n\n              const unreadMessages = lastUnreadMessage === 0 ?\n                0\n                :\n                lastUnreadMessage - (newNumber - oldNumber);\n\n              if (unreadMessages >= 0) {\n                app.session.user.pushAttributes({\n                  unreadMessages,\n                });\n\n                m.redraw();\n              }\n\n              this.firstLoad = false;\n            });\n        }\n        app.cache.messages[this.conversation.id()].push(...results);\n        if (results.length < 20) {\n          this.notNew = true;\n        }\n      })\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  load() {\n    this.loading = true;\n    m.redraw();\n\n    app.cache.messages ??= [];\n\n    this.conversation.recipients().map((recipient) => {\n      if (parseInt(recipient.user().id()) !== parseInt(app.session.user.id())) {\n        this.user = recipient.user();\n        this.recipient = recipient;\n      } else {\n        this.meRecipient = recipient;\n      }\n    });\n\n    app.cache.messages[this.conversation.id()] ??= [];\n\n    this.getMessages();\n  }\n\n  isMobile() {\n    return this.vnode.attrs.mobile;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/userOnline'];","import Component from 'flarum/common/Component';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport userOnline from 'flarum/common/helpers/userOnline';\nimport app from 'flarum/forum/app';\n\nexport default class UserListItem extends Component {\n  oninit(vnode) {\n    this.conversation = vnode.attrs.conversation;\n    this.user = null;\n\n    const userId = parseInt(app.session.user.id());\n\n    this.user = this.conversation\n      .recipients()\n      .find((recipient) => parseInt(recipient.user().id()) !== userId)\n      ?.user();\n    m.redraw();\n\n    const typingInterval = () => {\n      if (this.typingTime < new Date(Date.now() - 6000)) {\n        this.typing = false;\n        m.redraw();\n      }\n      setTimeout(() => {\n        typingInterval();\n      }, 6000);\n    };\n\n    typingInterval();\n\n    super.oncreate(vnode);\n  }\n\n  onremove(vnode) {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        object.channels.user.unbind('typing');\n      });\n    }\n\n    super.onremove(vnode);\n  }\n\n  oncreate(vnode) {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        channels.user.bind('typing', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            this.typing = true;\n            this.typingTime = new Date();\n            m.redraw();\n          }\n        });\n      });\n    }\n\n    super.oncreate(vnode);\n  }\n\n  view(vnode) {\n    if (!this.user) return null;\n\n    return (\n      <li id={vnode.attrs.index} className={vnode.attrs.active ? 'UserListItem active' : 'UserListItem'} onclick={vnode.attrs.onclick}>\n        <div className=\"UserListItem-content\">\n          {avatar(this.user)}\n          <div className=\"info\">\n            {username(this.user)}\n            {userOnline(this.user)}\n          </div>\n          {this.typing && (\n            <div className=\"tiblock\">\n              <div className=\"tidot\"></div>\n            </div>\n          )}\n        </div>\n      </li>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Search'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","import highlight from 'flarum/common/helpers/highlight';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\n\nexport default class UserSearchSource {\n  view(query) {\n    if (query.length < 3 || this.loading) return;\n\n    app.cache.conversationResults ??= [];\n\n    this.query = query;\n\n    if (!app.cache.conversationResults[this.query]) {\n      this.loading = true;\n\n      app.cache.conversationResults[this.query] = [];\n      app.store\n        .find('users', {\n          filter: { q: this.query },\n          page: { limit: 5 },\n        })\n        .then(this.pushResults.bind(this));\n    } else\n      return [\n        <li className=\"Dropdown-header\">{app.translator.trans('core.forum.search.users_heading')}</li>,\n        app.cache.conversationResults[this.query].map((user) => {\n          let name = username(user);\n          name = highlight(name.text, this.query);\n\n          return (\n            <li className=\"SearchResult\" data-index={user.id()}>\n              <a data-index={'users:' + user.id()}>\n                {avatar(user)}\n                {name}\n              </a>\n            </li>\n          );\n        }),\n      ];\n  }\n\n  pushResults(results) {\n    results.payload.data.map((result) => {\n      const user = app.store.getById('users', result.id);\n      if (parseInt(user.id()) !== parseInt(app.session.user.id())) {\n        app.cache.conversationResults[this.query].push(user);\n      }\n    });\n    this.loading = false;\n    m.redraw();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extract'];","import Search from 'flarum/forum/components/Search';\nimport UserSearchSource from './UserSearchSource';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport recipientLabel from './recipientLabel';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport app from 'flarum/forum/app';\n\nexport default class RecipientSearch extends Search {\n  oninit(attrs) {\n    this.value = Stream();\n    super.oninit(attrs);\n  }\n\n  updateMaxHeight() {\n    // stub\n  }\n\n  view() {\n    if (this.value == null) {\n      this.value('');\n    }\n\n    const loading = this.value() && this.value().length >= 3;\n\n    this.sources ??= this.sourceItems().toArray();\n\n    return (\n      <div className=\"AddRecipientModal-body\">\n        {app.cache.conversationsRecipient === null ? (\n          <div className=\"AddRecipientModal-form-input\">\n            <input\n              className={classList('RecipientsInput FormControl', {\n                open: !!this.value(),\n                focused: !!this.value(),\n                active: !!this.value(),\n                loading: !!this.loadingSources,\n              })}\n              config={function (element) {\n                element.focus();\n              }}\n              type=\"search\"\n              placeholder={extractText(app.translator.trans('neoncube-private-messages.forum.modal.search_recipients'))}\n              value={this.value()}\n              oninput={withAttr('value', this.value)}\n              onfocus={() => (this.hasFocus = true)}\n              onblur={() => (this.hasFocus = false)}\n              onkeyup={() => {\n                clearTimeout(this.typingTimer);\n                this.doSearch = false;\n                this.typingTimer = setTimeout(() => {\n                  this.doSearch = true;\n                  m.redraw();\n                }, 900);\n              }}\n              onkeydown={() => {\n                clearTimeout(this.typingTimer);\n              }}\n            />\n            <ul\n              className={classList('Dropdown-menu Search-results fade', {\n                in: !!loading,\n              })}\n              onclick={() => {\n                const target = this.$('.SearchResult.active');\n\n                this.addRecipient(target.data('index'));\n                this.$('.RecipientsInput').trigger('focus');\n              }}\n            >\n              {!this.doSearch\n                ? LoadingIndicator.component({ size: 'tiny', className: 'Button Button--icon Button--link' })\n                : this.sources.map((source) => source.view(this.value()))}\n              <li>\n                <span>{app.translator.trans('neoncube-private-messages.forum.modal.more_users')}</span>\n              </li>\n            </ul>\n          </div>\n        ) : (\n          <div className=\"RecipientsInput-selected RecipientsLabel\">\n            {recipientLabel(app.cache.conversationsRecipient, {\n              onclick: () => {\n                this.removeRecipient(app.cache.conversationsRecipient);\n              },\n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  /**\n   * Build an item list of SearchSources.\n   *\n   * @return {ItemList}\n   */\n  sourceItems() {\n    const items = new ItemList();\n\n    items.add('users', new UserSearchSource());\n\n    return items;\n  }\n\n  /**\n   * Clear the search input and the current controller's active search.\n   */\n  clear() {\n    this.value('');\n\n    m.redraw();\n  }\n\n  /**\n   * Adds a recipient.\n   *\n   * @param value\n   */\n  addRecipient(value) {\n    app.cache.conversationsRecipient = app.store.getById('users', value);\n\n    this.clear();\n  }\n\n  /**\n   * Removes a recipient.\n   *\n   * @param recipient\n   */\n  removeRecipient(recipient) {\n    app.cache.conversationsRecipient = null;\n\n    m.redraw();\n  }\n\n  /**\n   * Loads a recipient from the global store.\n   *\n   * @param store\n   * @param id\n   * @returns {Model}\n   */\n  findRecipient(store, id) {\n    return app.store.getById(store, id);\n  }\n}\n","import extract from 'flarum/common/utils/extract';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\n\nexport default function recipientLabel(recipient, attrs = {}) {\n  attrs.style ??= {};\n  attrs.className = 'RecipientLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n\n  return m(\n    link ? 'a' : 'span',\n    attrs,\n    <span className=\"RecipientLabel-text\">\n      {avatar(recipient)}\n      {username(recipient)}\n    </span>\n  );\n}\n","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport RecipientSearch from './RecipientSearch';\nimport username from 'flarum/common/helpers/username';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport app from 'flarum/forum/app';\n\nexport default class StartConversationModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.cache.conversationsRecipient = null;\n\n    this.conversations = this.attrs.conversations;\n\n    this.already = false;\n\n    this.messageContent = Stream('');\n  }\n\n  title() {\n    return app.translator.trans('neoncube-private-messages.forum.modal.title');\n  }\n\n  className() {\n    return 'StartConversationModal Modal--medium';\n  }\n\n  content() {\n    return [\n      <div className=\"Modal-body\" onclick={(e) => e.stopImmediatePropagation()}>\n        {this.already ? (\n          [\n            <h2>{app.translator.trans('neoncube-private-messages.forum.modal.already', { username: username(this.recpient) })}</h2>,\n            <h2>{app.translator.trans('neoncube-private-messages.forum.modal.copied', { username: username(this.recpient) })}</h2>,\n          ]\n        ) : (\n          <div>\n            <div class=\"helpText\">\n              {app.cache.conversationsRecipient !== null\n                ? app.translator.trans('neoncube-private-messages.forum.modal.help_start', { username: username(app.cache.conversationsRecipient) })\n                : app.translator.trans('neoncube-private-messages.forum.modal.help')}\n            </div>\n            <div className=\"AddRecipientModal-form\">\n              <RecipientSearch state={app.search} />\n              {app.cache.conversationsRecipient !== null ? (\n                <div className=\"AddRecipientModal-form-submit\">\n                  <textarea\n                    value={this.messageContent()}\n                    oninput={withAttr('value', this.messageContent)}\n                    placeholder={app.translator.trans('neoncube-private-messages.forum.chat.text_placeholder')}\n                    rows=\"3\"\n                  />\n                  {Button.component(\n                    {\n                      type: 'submit',\n                      className: 'Button Button--primary',\n                      disabled: !this.messageContent(),\n                    },\n                    app.translator.trans('neoncube-private-messages.forum.modal.submit')\n                  )}\n                </div>\n              ) : (\n                ''\n              )}\n            </div>\n          </div>\n        )}\n      </div>,\n    ];\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    const recipient = app.cache.conversationsRecipient;\n    this.recpient = recipient;\n    app.cache.conversationsRecipient = null;\n\n    app.store\n      .createRecord('conversations')\n      .save({\n        messageContents: this.messageContent(),\n        recipient: recipient.id(),\n      })\n      .then((conversation) => {\n        if (!conversation.notNew()) {\n          this.conversations.push(conversation);\n\n          // const preconv = app.session.user.conversations();\n          // preconv.push(conversation);\n          // app.session.user.conversations = Stream(preconv);\n\n\n          // Need to review Github diff after this point\n          m.redraw();\n          app.modal.close();\n        } else {\n          let input = document.createElement('textarea');\n          document.body.appendChild(input);\n          input.value = this.messageContent();\n          input.focus();\n          input.select();\n          document.execCommand('Copy');\n          input.remove();\n          this.already = true;\n          m.redraw();\n        }\n      });\n  }\n}\n","import Button from 'flarum/common/components/Button';\nimport Component from 'flarum/common/Component';\nimport ConversationView from './ConversationView';\nimport UserListItem from './UserListItem';\nimport StartConversationModal from './StartConversationModal';\nimport app from 'flarum/forum/app';\n\nexport default class ConversationsList extends Component {\n  oninit(vnode) {\n    this.mobile = vnode.attrs.mobile;\n    this.load();\n    this.loading = false;\n  }\n\n  onupdate() { }\n\n  onbeforeupdate() {\n    const list = $('.ConversationsList-list');\n\n    list.off('scroll').on('scroll', () => {\n      if (list.scrollTop() + list.innerHeight() >= list[0].scrollHeight) {\n        this.loadMore();\n      }\n    });\n  }\n\n  view() {\n    if (this.loading) return;\n\n    const conversations = app.cache.conversations;\n\n    if (this.currentConversation === null && conversations?.length > 0) {\n      this.currentConversation = conversations[0];\n    }\n\n    if (this.currentConversation) {\n      this.conversationComponent = ConversationView.component({ conversation: this.currentConversation, mobile: this.mobile });\n    }\n\n    // This used to use app.session.user.conversations(). Not sure this makes sense, or if it makes sense to reload when opening the conversations dropdown?\n    const hasConversations = conversations?.length > 0;\n\n    const redrawConversationsList = () => m.redraw();\n\n    return (\n      <div className=\"ConversationsList\">\n        <div style={hasConversations ? '' : 'width: unset; padding: 10px;'} className=\"container clearfix\">\n          <div style={this.mobile ? 'float: unset; margin: 0 auto; display: block;' : ''} className=\"people-list\" id=\"people-list\">\n            {Button.component(\n              {\n                onclick: this.showModal.bind(this),\n                className: 'Button Button--primary',\n                disabled: !app.forum.attribute('canMessage'),\n              },\n              app.forum.attribute('canMessage')\n                ? app.translator.trans('neoncube-private-messages.forum.chat.start')\n                : app.translator.trans('neoncube-private-messages.forum.chat.cant_start')\n            )}\n            {hasConversations && (\n              <ul className=\"ConversationsList-list\">\n                {Array.isArray(conversations) &&\n                  conversations.map((conversation, index) => {\n                    return (\n                      <UserListItem\n                        conversation={conversation}\n                        index={index}\n                        active={this.mobile ? false : this.currentConversation === conversation}\n                        onclick={(e) => {\n                          if (this.mobile) {\n                            m.route(app.route('messages', { id: app.cache.conversations[$(e.currentTarget).attr('id')].id() }));\n                          } else {\n                            this.currentConversation = app.cache.conversations[$(e.currentTarget).attr('id')];\n\n                            redrawConversationsList();\n                          }\n                        }}\n                      />\n                    );\n                  })}\n              </ul>\n            )}\n          </div>\n\n          {!this.mobile && this.conversationComponent}\n        </div>\n      </div>\n    );\n  }\n\n  showModal() {\n    app.modal.show(StartConversationModal, {\n      conversations: app.cache.conversations,\n      messages: app.cache.messages,\n    });\n  }\n\n  loadMore() {\n    this.loading = true;\n    m.redraw();\n\n    app.store\n      .find('neoncube-private-messages/conversations', { offset: app.cache.conversations.length })\n      .then((results) => {\n        delete results.payload;\n        results.map((result) => {\n          app.cache.conversations.push(result);\n        });\n      })\n      .catch(() => { })\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  load() {\n    if (app.cache.conversations && !this.mobile)\n      return;\n\n    if (this.mobile)\n      app.cache.conversations = [];\n\n    this.loading = true;\n    m.redraw();\n\n    app.store\n      .find('neoncube-private-messages/conversations')\n      .then((results) => {\n        delete results.payload;\n        app.cache.conversations = results;\n      })\n      .catch(() => { })\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","import Page from 'flarum/common/components/Page';\n\nimport ConversationsList from './ConversationsList';\n\nexport default class ConversationsPage extends Page {\n  oninit() {\n    super.oninit();\n\n    app.history.push('messages');\n\n    this.bodyClass = 'App--conversations';\n  }\n\n  view() {\n    return (\n      <div className=\"ConversationsPage\">\n        <ConversationsList mobile={true}></ConversationsList>\n      </div>\n    );\n  }\n}\n","import Page from 'flarum/common/components/Page';\n\nimport ConversationView from './ConversationView';\n\nexport default class ConversationViewPage extends Page {\n  init() {\n    super.init();\n\n    app.history.push('conversations');\n\n    const idParam = m.route.param('id');\n\n    app.store.find('neoncube-private-messages/conversations', idParam).then((conversation) => {\n      app.cache.conversations = [conversation];\n      this.list = ConversationView.component({ conversation, mobile: true });\n      m.redraw();\n    });\n\n    this.bodyClass = 'App--messages';\n  }\n\n  view() {\n    return (\n      <div className=\"MessagesPage\">\n        <div className=\"ConversationsList\">\n          <div className=\"container clearfix\">{this.list ? this.list : null}</div>\n        </div>\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import Notification from 'flarum/forum/components/Notification';\n// import username from 'flarum/common/helpers/username';\n\nexport default class PrivateMessageReceivedNotification extends Notification {\n  icon() {\n    return 'fas fa-message';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const discussion = notification.subject();\n    const content = notification.content() || {};\n\n    return app.route.discussion(discussion, content.postNumber);\n  }\n\n  content() {\n    return app.translator.trans('neoncube-private-messages.forum.notifications.message_received', { user: this.attrs.notification.fromUser() });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationsDropdown'];","import app from 'flarum/forum/app';\nimport NotificationsDropdown from 'flarum/forum/components/NotificationsDropdown';\nimport ConversationsList from './ConversationsList';\n\nexport default class ConversationsDropdown extends NotificationsDropdown {\n  static initAttrs(attrs) {\n    attrs.label ||= app.translator.trans('neoncube-private-messages.forum.dropdown.tooltip');\n    attrs.icon ||= 'fas fa-comment-alt';\n    attrs.className = 'MessagesDropdown NotificationsDropdown';\n\n    super.initAttrs(attrs);\n  }\n\n  onclick() {\n    if (app.drawer.isOpen()) {\n      this.goToRoute();\n    }\n  }\n\n  getMenu() {\n    return <form className={'Dropdown-menu ' + this.attrs.menuClassName}>{this.showing && <ConversationsList mobile={false} />}</form>;\n  }\n\n  goToRoute() {\n    m.route(app.route('conversations'));\n  }\n\n  getUnreadCount() {\n    return app.session.user.unreadMessages();\n  }\n\n  getNewCount() {\n    return this.getUnreadCount();\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport Message from './models/Message';\nimport Conversation from './models/Conversation';\nimport ConversationUser from './models/ConversationUser';\nimport User from 'flarum/common/models/User';\nimport Model from 'flarum/common/Model';\nimport ConversationsPage from './components/ConversationsPage';\nimport ConversationViewPage from './components/ConversationViewPage';\nimport PrivateMessageReceivedNotification from './components/PrivateMessageReceivedNotification';\nimport Stream from 'flarum/common/utils/Stream';\nimport addConversationsDropdown from './addConversationsDropdown';\n\napp.initializers.add('neoncube-private-messages', function (app) {\n  app.store.models.messages = Message;\n  app.store.models.conversations = Conversation;\n  app.store.models.conversation_users = ConversationUser;\n\n  User.prototype.conversations = Model.hasMany('conversations');\n  User.prototype.unreadMessages = Model.attribute('unreadMessages');\n\n  app.notificationComponents.privateMessageReceived = PrivateMessageReceivedNotification;\n\n  app.routes.conversations = { path: '/neoncube-private-messages/conversations', component: ConversationsPage };\n  app.routes.messages = { path: '/neoncube-private-messages/messages/:id', component: ConversationViewPage };\n\n  addConversationsDropdown();\n\n  extend(IndexPage.prototype, 'oncreate', function () {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        if (channels.user) {\n          channels.user.bind('newMessage', (data) => {\n            app.session.user.unreadMessages = Stream(app.session.user.unreadMessages() + 1);\n            m.redraw();\n          });\n        }\n      });\n    }\n  });\n\n  extend(IndexPage.prototype, 'onremove', function () {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        if (channels.user) {\n          channels.user.unbind('newMessage');\n        }\n      });\n    }\n  });\n\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('privateMessgeReceived', {\n      name: 'privateMessgeReceived',\n      icon: 'fas fa-comment-alt',\n      label: app.translator.trans('neoncube-private-messages.forum.notifications.notify_message_received'),\n    });\n  });\n});\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport ConversationsDropdown from './components/ConversationsDropdown';\n\nexport default function () {\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    // TODO: It used to be that the conversations icon was also shown if the user had any conversations, but I've commented this out,\n    // because it wasn't working, at least for me.\n    // I think a better approach would be to load a count of how many conversations a user has, instead of actually loading all conversations\n    // whenever loading a user.\n    if (app.forum.attribute('canMessage')/* || (app.session.user && app.session.user.conversations().length)*/) {\n      items.add('Messages', <ConversationsDropdown />, 20);\n    }\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","Message","_mixin","apply","arguments","apiEndpoint","this","exists","data","id","mixin","Model","message","user","isHidden","createdAt","conversation","number","Conversation","messages","recipients","totalMessages","notNew","updatedAt","ConversationUser","userId","conversationId","lastRead","MessageText","_Component","initAttrs","attrs","className","content","preview","_proto","view","m","oncreate","vnode","_this","updatePreview","s9e","TextFormatter","dom","updateInterval","setInterval","onremove","clearInterval","Component","ConversationView","oninit","loading","idParam","route","param","firstLoad","typingTimeout","sendTimeout","typingTimeoutInterval","setTimeout","typingInterval","typingTime","Date","now","typing","redraw","sendTimeoutInterval","timer","initPost","newMessageCount","load","messageContent","Stream","Promise","$","animate","scrollTop","app","then","object","channels","unbind","onupdate","_this2","scroll","firstMsg","getMessages","length","offset","top","onbeforeupdate","_this3","off","on","conversations","currentTarget","attr","index","cipher","console","log","keyCode","attribute","sendMessage","_this4","parseInt","children","is","decryptMessages","list","scrollMore","innerHeight","scrollHeight","recipient","_this5","style","isMobile","avatar","trans","username","count","filter","self","findIndex","sort","b","map","i","myMessage","humanTime","attributes","icon","LoadingIndicator","display","size","value","oninput","withAttr","typingPush","placeholder","rows","Button","onclick","disabled","_this6","method","url","body","_this7","replace","createRecord","save","messageContents","push","messageId","_this8","find","results","_app$cache$messages$_","payload","oldNumber","meRecipient","response","newNumber","lastUnreadMessage","unreadMessages","pushAttributes","_app$cache","_app$cache$messages2","_this$conversation$id","_this9","mobile","UserListItem","_this$conversation$re","active","userOnline","UserSearchSource","query","cache","conversationResults","translator","name","highlight","text","store","q","page","limit","pushResults","result","getById","session","RecipientSearch","_Search","updateMaxHeight","sources","sourceItems","toArray","conversationsRecipient","classList","open","focused","loadingSources","config","element","focus","type","extractText","onfocus","hasFocus","onblur","onkeyup","clearTimeout","typingTimer","doSearch","onkeydown","in","target","addRecipient","trigger","source","_attrs","link","extract","recipientLabel","removeRecipient","items","ItemList","add","clear","findRecipient","Search","StartConversationModal","_Modal","already","title","stopImmediatePropagation","recpient","class","state","onsubmit","preventDefault","input","document","createElement","appendChild","select","execCommand","remove","close","Modal","ConversationsList","loadMore","currentConversation","conversationComponent","component","hasConversations","showModal","Array","isArray","show","ConversationsPage","_Page","history","bodyClass","Page","ConversationViewPage","init","PrivateMessageReceivedNotification","_Notification","href","notification","discussion","subject","postNumber","fromUser","Notification","ConversationsDropdown","_NotificationsDropdow","label","isOpen","goToRoute","getMenu","menuClassName","showing","getUnreadCount","getNewCount","NotificationsDropdown","models","conversation_users","User","notificationComponents","privateMessageReceived","routes","path","extend","HeaderSecondary","IndexPage","pusher","NotificationGrid"],"sourceRoot":""}