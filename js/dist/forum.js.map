{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/typeof.js","webpack://flarum-private-messages/./node_modules/@babel/runtime/regenerator/index.js","webpack://flarum-private-messages/webpack/bootstrap","webpack://flarum-private-messages/webpack/runtime/compat get default export","webpack://flarum-private-messages/webpack/runtime/define property getters","webpack://flarum-private-messages/webpack/runtime/hasOwnProperty shorthand","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/app']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/extend']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/Model']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://flarum-private-messages/./src/forum/models/Message.js","webpack://flarum-private-messages/./src/forum/models/Conversation.js","webpack://flarum-private-messages/./src/forum/models/ConversationUser.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/models/User']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Page']\"","webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Button']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Link']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/Component']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/username']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://flarum-private-messages/./src/forum/components/MessageText.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://flarum-private-messages/./src/forum/components/ConversationView.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/userOnline']\"","webpack://flarum-private-messages/./src/forum/components/UserListItemContent.js","webpack://flarum-private-messages/./src/forum/components/UserListItem.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Modal']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/Search']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://flarum-private-messages/./src/forum/components/UserSearchSource.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/classList']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/extract']\"","webpack://flarum-private-messages/./src/forum/components/RecipientSearch.js","webpack://flarum-private-messages/./src/forum/components/recipientLabel.js","webpack://flarum-private-messages/./src/forum/components/StartConversationModal.js","webpack://flarum-private-messages/./src/forum/components/ConversationsList.js","webpack://flarum-private-messages/./src/forum/components/ConversationsPage.js","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://flarum-private-messages/./src/forum/components/NewPrivateMessageNotification.js","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/NotificationsDropdown']\"","webpack://flarum-private-messages/./src/forum/components/ConversationsDropdown.js","webpack://flarum-private-messages/./src/forum/index.js","webpack://flarum-private-messages/./src/forum/addConversationsDropdown.js"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Message extends mixin(Model, {\n  message: Model.attribute('message'),\n  user: Model.hasOne('user'),\n  isHidden: Model.attribute('isHidden'),\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  conversation: Model.hasOne('conversation'),\n  number: Model.hasOne('number'),\n}) {\n  apiEndpoint() {\n    return `/neoncube-private-messages/messages${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Conversation extends mixin(Model, {\n  messages: Model.hasMany('messages'),\n  recipients: Model.hasMany('recipients'),\n  totalMessages: Model.attribute('totalMessages'),\n  notNew: Model.attribute('notNew'),\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  updatedAt: Model.attribute('updatedAt', Model.transformDate),\n}) {\n  apiEndpoint() {\n    return `/neoncube-private-messages/conversations${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class ConversationUser extends mixin(Model, {\n  conversation: Model.hasOne('conversation'),\n  user: Model.hasOne('user'),\n\n  userId: Model.attribute('userId'),\n  conversationId: Model.attribute('conversationId'),\n  lastRead: Model.attribute('lastRead'),\n}) {}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import Component from 'flarum/common/Component';\n\nexport default class MessageText extends Component {\n  static initAttrs(attrs) {\n    attrs.className ??= '';\n    attrs.content ??= '';\n    attrs.preview ??= false;\n  }\n\n  view(vnode) {\n    return <div className={this.attrs.className} />;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    if (this.attrs.preview) {\n      let preview;\n      const updatePreview = () => {\n        const content = this.attrs.content;\n\n        if (preview === content) return;\n\n        preview = content;\n\n        s9e.TextFormatter.preview(content || '', vnode.dom);\n      };\n      updatePreview();\n\n      this.updateInterval = setInterval(updatePreview, 50);\n    } else {\n      s9e.TextFormatter.preview(this.attrs.content, vnode.dom);\n    }\n  }\n\n  onremove() {\n    clearInterval(this.updateInterval);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport MessageText from './MessageText';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport icon from 'flarum/common/helpers/icon';\nimport app from 'flarum/forum/app';\n\nexport default class ConversationView extends Component {\n  oninit(vnode) {\n    this.newMessageCount = 0;\n    this.loading = true;\n    this.vnode = vnode;\n    this.firstLoad = true;\n    this.typingTimeout = true;\n    this.isSending = false;\n    this.sendTimeout = true;\n    this.typing = false;\n    this.messageContent = Stream('');\n    this.isNew = true;\n\n    const typingTimeoutInterval = () => {\n      this.typingTimeout = true;\n      setTimeout(() => {\n        typingTimeoutInterval();\n      }, 5000);\n    };\n\n    const typingInterval = () => {\n      if (this.typingTime < new Date(Date.now() - 6000)) {\n        this.typing = false;\n        m.redraw();\n      }\n      setTimeout(() => {\n        typingInterval();\n      }, 6000);\n    };\n\n    this.sendTimeoutInterval = () => {\n      if (this.timer === 0) {\n        this.sendTimeout = true;\n        m.redraw();\n        return;\n      }\n      this.timer--;\n      if (this.timer >= 0) {\n        setTimeout(() => {\n          this.sendTimeoutInterval();\n        }, 1000);\n      }\n    };\n\n    typingTimeoutInterval();\n    typingInterval();\n\n    this.conversation ??= vnode.attrs.conversation;\n\n    this.conversation.recipients().map((recipient) => {\n      if (parseInt(recipient.user().id()) !== parseInt(app.session.user.id())) {\n        this.user = recipient.user();\n        this.recipient = recipient;\n      } else {\n        this.meRecipient = recipient;\n      }\n    });\n    app.cache.messages ??= [];\n    app.cache.messages[this.conversation.id()] ??= [];\n\n    this.getMessages();\n  }\n\n  onremove() {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const user = object.channels.user;\n        user.unbind('typing');\n        user.unbind('newMessage');\n      });\n    }\n  }\n\n  onupdate() {\n    $('.chat-history').scroll(() => {\n      if (this.isNew) {\n        const pos = $('.chat-history').scrollTop();\n        if (pos === 0) {\n          const firstMsg = $('.message-content:first');\n          this.getMessages(app.cache.messages[this.conversation.id()].length);\n\n          $('.chat-history').scrollTop(firstMsg.offset().top);\n        }\n      }\n    });\n  }\n\n  oncreate() {\n    $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 1000);\n\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        channels.user.bind('newMessage', (data) => {\n          if (\n            parseInt(data.conversationId) === parseInt(this.conversation.id()) &&\n            $('.MessagesDropdown').children('.Dropdown-menu').is(':visible')\n          ) {\n            const message = {\n              id: Stream(data.id),\n              message: Stream(data.message),\n              user: Stream(this.user),\n              createdAt: Stream(data.createdAt),\n            };\n            this.decryptMessages([message]);\n            this.newMessageCount++;\n            this.typing = false;\n            m.redraw();\n            $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 1000);\n          }\n        });\n\n        channels.user.bind('typing', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            const list = $('.chat-history');\n\n            const scrollMore = list.scrollTop() + list.innerHeight() >= list[0].scrollHeight - 50;\n\n            this.typing = true;\n            this.typingTime = new Date();\n            m.redraw();\n\n            if (scrollMore) {\n              list.animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 400);\n            }\n          }\n        });\n\n        channels.user.bind('readMessage', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            this.recipient.lastRead = Stream(data.number);\n            m.redraw();\n          }\n        });\n      });\n    }\n  }\n\n  view(vnode) {\n    const messages = app.cache.messages[this.conversation.id()];\n\n    return (\n      <div className=\"chat\">\n        <div className=\"chat-header\">\n          {avatar(this.user)}\n\n          <div className=\"chat-about\">\n            <div className=\"chat-with\">\n              {app.translator.trans('neoncube-private-messages.forum.chat.chat_with', { username: username(this.user) })}\n            </div>\n            <div className=\"chat-num-messages\">\n              {app.translator.trans(\n                'neoncube-private-messages.forum.chat.messages_' + (parseInt(this.conversation.totalMessages()) > 1 ? 'multiple' : 'single'),\n                { count: this.conversation.totalMessages() + this.newMessageCount }\n              )}\n            </div>\n          </div>\n        </div>\n\n        {messages?.length > 0 && !this.loading ? (\n          [\n            <div className=\"chat-history\">\n              <ul>\n                {!this.isNew ? (\n                  <li className=\"startConvo\">{app.translator.trans('neoncube-private-messages.forum.chat.start_of_conversation')}</li>\n                ) : (\n                  ''\n                )}\n                {messages\n                  ? messages\n                    // .filter((message, index, self) => index === self.findIndex(t => t.message() === message.message()))\n                    .sort((a, b) => a.createdAt() - b.createdAt())\n                    .map((message, i) => {\n                      const myMessage = parseInt(message.user().id()) === parseInt(app.session.user.id());\n                      return (\n                        <li className=\"clearfix message-content\">\n                          <div className={'message-data ' + (myMessage ? 'align-right' : '')}>\n                            <div className={'avatar-inline ' + (myMessage ? 'me' : 'other')}>\n                              {avatar(myMessage ? app.session.user : message.user())}\n                            </div>\n                            <span className=\"message-data-name\">{username(myMessage ? app.session.user : message.user())}</span>\n                            <span className=\"message-data-time\">{humanTime(message.createdAt())}</span>\n                          </div>\n                          <MessageText\n                            content={message.message()}\n                            className={'message ' + (myMessage ? 'my-message float-right' : 'other-message')}\n                          />\n                          {myMessage ? (\n                            parseInt(this.recipient.lastRead()) >= parseInt(message.data.attributes.number) ? (\n                              <span className=\"message-read\">{icon('fas fa-check')}</span>\n                            ) : (\n                              ''\n                            )\n                          ) : (\n                            ''\n                          )}\n                        </li>\n                      );\n                    })\n                  : ''}\n                {this.messageContent() ? (\n                  <li>\n                    <MessageText content={this.messageContent()} className={'message my-message float-right message-preview'} preview={true} />\n                  </li>\n                ) : (\n                  ''\n                )}\n                {this.typing ? (\n                  <li>\n                    <div className=\"tiblock\">\n                      <div className=\"tidot\"></div>\n                      <div className=\"tidot\"></div>\n                      <div className=\"tidot\"></div>\n                    </div>\n                  </li>\n                ) : (\n                  ''\n                )}\n              </ul>\n            </div>,\n          ]\n        ) : (\n          <LoadingIndicator display=\"block\" size=\"medium\" />\n        )}\n\n        <form className=\"chat-message clearfix\">\n          <textarea\n            id=\"MessageTextArea\"\n            value={this.messageContent()}\n            oninput={withAttr('value', this.typingPush.bind(this))}\n            placeholder={app.translator.trans('neoncube-private-messages.forum.chat.text_placeholder')}\n            rows=\"3\"\n            disabled={this.isSending && !this.sendTimeout}\n            onkeydown={e => {\n              if (e.keyCode === 13 && app.forum.attribute('neoncubePrivateMessagesReturnKey')) {\n                this.sendMessage();\n              }\n            }} />\n\n          <Button onclick={this.sendMessage.bind(this)} className=\"Button Button--primary\" disabled={!this.messageContent() || !this.sendTimeout}>\n            {app.translator.trans('neoncube-private-messages.forum.chat.send')}\n          </Button>\n        </form>\n      </div>\n    );\n  }\n\n  typingPush(value) {\n    this.messageContent(value);\n    m.redraw();\n    if (this.typingTimeout) {\n      app\n        .request({\n          method: 'POST',\n          url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/typing',\n          body: {\n            conversationId: this.conversation.id(),\n            userId: this.user.id(),\n          },\n        })\n        .then(() => {\n          this.typingTimeout = false;\n        });\n    }\n  }\n\n  sendMessage() {\n    if (!this.sendTimeout || this.messageContent() === '' || !this.messageContent().replace(/\\s/g, '').length) return;\n\n    this.isSending = true;\n    this.sendTimeout = false;\n    this.timer = 1;\n    this.sendTimeoutInterval();\n    this.newMessageCount++;\n\n    app.store\n      .createRecord('messages')\n      .save({\n        messageContents: this.messageContent(),\n        conversationId: this.conversation.id(),\n      })\n      .then((message) => {\n        app.cache.messages[this.conversation.id()].push(message);\n        m.redraw();\n        this.messageContent('');\n        this.isSending = false;\n        $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 500);\n\n        // TODO: Can this be done when the message is created?\n        app.request({\n          method: 'POST',\n          url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/read',\n          body: {\n            conversationId: this.conversation.id(),\n            messageId: message.id(),\n          },\n        });\n      });\n  }\n\n  getMessages(offset = 0) {\n    if (!this.isNew) return;\n\n    app.store\n      .find('neoncube-private-messages/messages', this.conversation.id(), { offset })\n      .then((results) => {\n        delete results.payload;\n\n        if (this.firstLoad) {\n          const oldNumber = this.meRecipient.lastRead();\n          app\n            .request({\n              method: 'POST',\n              url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/read',\n              body: {\n                conversationId: this.conversation.id(),\n                messageId: results[0].id(),\n              },\n            })\n            .then((response) => {\n              const newNumber = response.data.attributes.lastRead;\n              const lastUnreadMessage = app.session.user.unreadMessages();\n\n              const unreadMessages = lastUnreadMessage === 0 ? 0 : lastUnreadMessage - (newNumber - oldNumber);\n\n              if (unreadMessages >= 0) {\n                app.session.user.pushAttributes({\n                  unreadMessages,\n                });\n              }\n\n              this.firstLoad = false;\n\n              m.redraw();\n            });\n        }\n\n        app.cache.messages[this.conversation.id()].push(...results);\n\n        if (results.length < 20) {\n          this.isNew = false;\n        }\n\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/userOnline'];","import Component from 'flarum/common/Component';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport userOnline from 'flarum/common/helpers/userOnline';\n\nexport default class UserListItemContent extends Component {\n  view(vnode) {\n    const {\n      conversation,\n      typing\n    } = vnode.attrs;\n\n    const userId = parseInt(app.session.user.id());\n\n    const user = conversation\n      .recipients()\n      .find((recipient) => parseInt(recipient.user().id()) !== userId)\n      ?.user();\n\n    if (!user)\n      return 'Unknown user';\n\n    return (\n      <div className=\"UserListItem-content\">\n        {avatar(user)}\n\n        <div className=\"info\">\n          {username(user)}\n          {userOnline(user)}\n        </div>\n\n        {\n          typing &&\n          <div className=\"tiblock\">\n            <div className=\"tidot\"></div>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport UserListItemContent from './UserListItemContent';\n\nexport default class UserListItem extends Component {\n  oninit(vnode) {\n    this.conversation = vnode.attrs.conversation;\n\n    const typingInterval = () => {\n      if (this.typingTime < new Date(Date.now() - 6000)) {\n        this.typing = false;\n        m.redraw();\n      }\n      setTimeout(() => {\n        typingInterval();\n      }, 6000);\n    };\n\n    typingInterval();\n\n    super.oncreate(vnode);\n  }\n\n  onremove(vnode) {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        object.channels.user.unbind('typing');\n      });\n    }\n\n    super.onremove(vnode);\n  }\n\n  oncreate(vnode) {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        channels.user.bind('typing', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            this.typing = true;\n            this.typingTime = new Date();\n            m.redraw();\n          }\n        });\n      });\n    }\n\n    super.oncreate(vnode);\n  }\n\n  view(vnode) {\n    return (\n      <div className={vnode.attrs.active ? 'UserListItem active' : 'UserListItem'} onclick={vnode.attrs.onclick}>\n        <UserListItemContent conversation={this.conversation} typing={this.typing} />\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Search'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","import highlight from 'flarum/common/helpers/highlight';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\n\nexport default class UserSearchSource {\n  view(query) {\n    if (query.length < 3 || this.loading) return;\n\n    app.cache.conversationResults ??= [];\n\n    this.query = query;\n\n    if (!app.cache.conversationResults[this.query]) {\n      this.loading = true;\n\n      app.cache.conversationResults[this.query] = [];\n      app.store\n        .find('users', {\n          filter: { q: this.query },\n          page: { limit: 5 },\n        })\n        .then(this.pushResults.bind(this));\n    } else\n      return [\n        <li className=\"Dropdown-header\">{app.translator.trans('core.forum.search.users_heading')}</li>,\n        app.cache.conversationResults[this.query].map((user) => {\n          let name = username(user);\n          name = highlight(name.text, this.query);\n\n          return (\n            <li className=\"SearchResult\" data-index={user.id()}>\n              <a data-index={'users:' + user.id()}>\n                {avatar(user)}\n                {name}\n              </a>\n            </li>\n          );\n        }),\n      ];\n  }\n\n  pushResults(results) {\n    results.payload.data.map((result) => {\n      const user = app.store.getById('users', result.id);\n      if (parseInt(user.id()) !== parseInt(app.session.user.id())) {\n        app.cache.conversationResults[this.query].push(user);\n      }\n    });\n    this.loading = false;\n    m.redraw();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extract'];","import Search from 'flarum/forum/components/Search';\nimport UserSearchSource from './UserSearchSource';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport recipientLabel from './recipientLabel';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport app from 'flarum/forum/app';\n\nexport default class RecipientSearch extends Search {\n  oninit(vnode) {\n    this.value = Stream();\n    super.oninit(vnode);\n  }\n\n  updateMaxHeight() {\n    // stub\n  }\n\n  view(vnode) {\n    if (this.value == null) {\n      this.value('');\n    }\n\n    const loading = this.value() && this.value().length >= 3;\n\n    this.sources ??= this.sourceItems().toArray();\n\n    return (\n      <div className=\"AddRecipientModal-body\">\n        {app.cache.conversationsRecipient === null ? (\n          <div className=\"AddRecipientModal-form-input\">\n            <input\n              className={classList('RecipientsInput FormControl', {\n                open: !!this.value(),\n                focused: !!this.value(),\n                active: !!this.value(),\n                loading: !!this.loadingSources,\n              })}\n              config={function (element) {\n                element.focus();\n              }}\n              type=\"search\"\n              placeholder={extractText(app.translator.trans('neoncube-private-messages.forum.modal.search_recipients'))}\n              value={this.value()}\n              oninput={withAttr('value', this.value)}\n              onfocus={() => (this.hasFocus = true)}\n              onblur={() => (this.hasFocus = false)}\n              onkeyup={() => {\n                clearTimeout(this.typingTimer);\n                this.doSearch = false;\n                this.typingTimer = setTimeout(() => {\n                  this.doSearch = true;\n                  m.redraw();\n                }, 900);\n              }}\n              onkeydown={() => {\n                clearTimeout(this.typingTimer);\n              }}\n            />\n            <ul\n              className={classList('Dropdown-menu Search-results fade', {\n                in: !!loading,\n              })}\n              onclick={() => {\n                const target = this.$('.SearchResult.active');\n\n                this.addRecipient(target.data('index'));\n                this.$('.RecipientsInput').trigger('focus');\n              }}\n            >\n              {!this.doSearch\n                ? <LoadingIndicator size=\"tiny\" className=\"Button Button--icon Button--link\" />\n                : this.sources.map((source) => source.view(this.value()))}\n              <li>\n                <span>{app.translator.trans('neoncube-private-messages.forum.modal.more_users')}</span>\n              </li>\n            </ul>\n          </div>\n        ) : (\n          <div className=\"RecipientsInput-selected RecipientsLabel\">\n            {recipientLabel(app.cache.conversationsRecipient, {\n              onclick: () => {\n                this.removeRecipient(app.cache.conversationsRecipient);\n              },\n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  /**\n   * Build an item list of SearchSources.\n   *\n   * @return {ItemList}\n   */\n  sourceItems() {\n    const items = new ItemList();\n\n    items.add('users', new UserSearchSource());\n\n    return items;\n  }\n\n  /**\n   * Clear the search input and the current controller's active search.\n   */\n  clear() {\n    this.value('');\n\n    m.redraw();\n  }\n\n  /**\n   * Adds a recipient.\n   *\n   * @param value\n   */\n  addRecipient(value) {\n    app.cache.conversationsRecipient = app.store.getById('users', value);\n\n    this.clear();\n  }\n\n  /**\n   * Removes a recipient.\n   *\n   * @param recipient\n   */\n  removeRecipient(recipient) {\n    app.cache.conversationsRecipient = null;\n\n    m.redraw();\n  }\n\n  /**\n   * Loads a recipient from the global store.\n   *\n   * @param store\n   * @param id\n   * @returns {Model}\n   */\n  findRecipient(store, id) {\n    return app.store.getById(store, id);\n  }\n}\n","import extract from 'flarum/common/utils/extract';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\n\nexport default function recipientLabel(recipient, attrs = {}) {\n  attrs.style ??= {};\n  attrs.className = 'RecipientLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n\n  return m(\n    link ? 'a' : 'span',\n    attrs,\n    <span className=\"RecipientLabel-text\">\n      {avatar(recipient)}\n      {username(recipient)}\n    </span>\n  );\n}\n","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport RecipientSearch from './RecipientSearch';\nimport username from 'flarum/common/helpers/username';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport app from 'flarum/forum/app';\n\nexport default class StartConversationModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.cache.conversationsRecipient = null;\n\n    this.conversations = this.attrs.conversations;\n\n    this.already = false;\n\n    this.messageContent = Stream('');\n  }\n\n  title() {\n    return app.translator.trans('neoncube-private-messages.forum.modal.title');\n  }\n\n  className() {\n    return 'StartConversationModal Modal--medium';\n  }\n\n  content() {\n    return [\n      <div className=\"Modal-body\" onclick={(e) => e.stopImmediatePropagation()}>\n        {this.already ? (\n          [\n            <h2>{app.translator.trans('neoncube-private-messages.forum.modal.already', { username: username(this.recpient) })}</h2>,\n            <h2>{app.translator.trans('neoncube-private-messages.forum.modal.copied', { username: username(this.recpient) })}</h2>,\n          ]\n        ) : (\n          <div>\n            <div class=\"helpText\">\n              {app.cache.conversationsRecipient !== null\n                ? app.translator.trans('neoncube-private-messages.forum.modal.help_start', { username: username(app.cache.conversationsRecipient) })\n                : app.translator.trans('neoncube-private-messages.forum.modal.help')}\n            </div>\n            <div className=\"AddRecipientModal-form\">\n              <RecipientSearch state={app.search} />\n              {app.cache.conversationsRecipient !== null ? (\n                <div className=\"AddRecipientModal-form-submit\">\n                  <textarea\n                    value={this.messageContent()}\n                    oninput={withAttr('value', this.messageContent)}\n                    placeholder={app.translator.trans('neoncube-private-messages.forum.chat.text_placeholder')}\n                    rows=\"3\"\n                  />\n                  <Button type=\"submit\" className=\"Button Button--primary\" disabled={!this.messageContent()}>\n                    {app.translator.trans('neoncube-private-messages.forum.modal.submit')}\n                  </Button>\n                </div>\n              ) : (\n                ''\n              )}\n            </div>\n          </div>\n        )}\n      </div>,\n    ];\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    const recipient = app.cache.conversationsRecipient;\n    this.recpient = recipient;\n    app.cache.conversationsRecipient = null;\n\n    app.store\n      .createRecord('conversations')\n      .save({\n        messageContents: this.messageContent(),\n        recipient: recipient.id(),\n      })\n      .then((conversation) => {\n        if (!conversation.notNew()) {\n          this.conversations.push(conversation);\n\n          // const preconv = app.session.user.conversations();\n          // preconv.push(conversation);\n          // app.session.user.conversations = Stream(preconv);\n\n          // Need to review Github diff after this point\n          m.redraw();\n          app.modal.close();\n        } else {\n          let input = document.createElement('textarea');\n          document.body.appendChild(input);\n          input.value = this.messageContent();\n          input.focus();\n          input.select();\n          document.execCommand('Copy');\n          input.remove();\n          this.already = true;\n          m.redraw();\n        }\n      });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport Link from 'flarum/common/components/Link';\nimport Component from 'flarum/common/Component';\nimport ConversationView from './ConversationView';\nimport UserListItem from './UserListItem';\nimport StartConversationModal from './StartConversationModal';\nimport UserListItemContent from './UserListItemContent';\n\nexport default class ConversationsList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = true;\n    this.currentConversationId = vnode.attrs.currentConversationId;\n\n    app.cache.conversations ??= [];\n\n    app.store\n      .find('neoncube-private-messages/conversations')\n      .then((results) => {\n        delete results.payload;\n        app.cache.conversations = results;\n\n        this.loading = false;\n\n        m.redraw()\n      })\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    const list = $('.ConversationsList-list');\n\n    list.off('scroll').on('scroll', () => {\n      if (list.scrollTop() + list.innerHeight() >= list[0].scrollHeight) {\n        this.loadMore();\n      }\n    });\n  }\n\n  view(vnode) {\n    const conversations = app.cache.conversations;\n\n    const currentConversation = conversations?.find(conversation => conversation.data.id === this.currentConversationId);\n\n    // This used to use app.session.user.conversations(). Not sure this makes sense, or if it makes sense to reload when opening the conversations dropdown?\n    const hasConversations = conversations?.length > 0;\n\n    return (\n      <div style={hasConversations ? '' : 'width: unset; padding: 10px;'} className=\"ConversationsList\">\n        <div className=\"people-list\" id=\"people-list\">\n          <Button onclick={() => this.showModal()} className=\"Button Button--primary\" disabled={!app.forum.attribute('canMessage')}>\n            {app.forum.attribute('canMessage')\n              ? app.translator.trans('neoncube-private-messages.forum.chat.start')\n              : app.translator.trans('neoncube-private-messages.forum.chat.cant_start')}\n          </Button>\n          {\n            hasConversations &&\n            <div className=\"ConversationsList-list mobile\">\n              {\n                conversations.map(conversation => {\n                  return (\n                    <Link className=\"UserListItem\" href={(app.route('messages', { id: conversation.data.id }))}>\n                      <UserListItemContent conversation={conversation} />\n                    </Link>\n                  );\n                })\n              }\n            </div>\n          }\n\n          {\n            hasConversations &&\n            <div className=\"ConversationsList-list desktop\">\n              {\n                conversations.map(conversation => {\n                  return (\n                    <UserListItem\n                      conversation={conversation}\n                      active={currentConversation === conversation}\n                      onclick={(e) => this.currentConversationId = conversation.data.id}\n                    />\n                  );\n                })\n              }\n            </div>\n          }\n        </div>\n\n        {\n          currentConversation &&\n          [<ConversationView key={currentConversation.id()} conversation={currentConversation} />]\n        }\n      </div>\n    );\n  }\n\n  showModal() {\n    app.modal.show(StartConversationModal, {\n      conversations: app.cache.conversations,\n      messages: app.cache.messages,\n    });\n  }\n\n  async loadMore() {\n    this.loading = true;\n\n    app.store\n      .find('neoncube-private-messages/conversations', { offset: app.cache.conversations.length })\n      .then((results) => {\n        delete results.payload;\n        results.map((result) => {\n          app.cache.conversations.push(result);\n        });\n\n        this.loading = false;\n\n        m.redraw();\n      });\n  }\n}\n","import Page from 'flarum/common/components/Page';\n\nimport ConversationsList from './ConversationsList';\n\nexport default class ConversationsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.currentConversationId = m.route.param('id');\n\n    this.bodyClass = 'App--conversations';\n  }\n\n  view(vnode) {\n    return (\n      <div className={this.currentConversationId != null ? 'ConversationsPage viewing-conversation' : 'ConversationsPage'}>\n        <ConversationsList currentConversationId={this.currentConversationId} />\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import Notification from 'flarum/forum/components/Notification';\n\nexport default class NewPrivateMessageNotification extends Notification {\n  icon() {\n    return 'fas fa-message';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n\n    const message = notification.subject();\n\n    return app.route('messages', { id: message.data.attributes.conversationId }/*, message.number*/);\n  }\n\n  content() {\n    const fromUser = this.attrs.notification.fromUser();\n\n    // // From https://github.com/flarum/framework/blob/main/framework/core/js/src/common/helpers/username.tsx#L9\n    // // The Flarum username() function expects displayName() to be a function, and it outputs a <span>, which I don't think is what we want.\n    const username = (fromUser && fromUser.data.attributes.displayName) || app.translator.trans('core.lib.username.deleted_text');\n\n    return app.translator.trans('neoncube-private-messages.forum.notifications.web.new_private_message.body', { 'fromUser': username });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationsDropdown'];","import app from 'flarum/forum/app';\nimport NotificationsDropdown from 'flarum/forum/components/NotificationsDropdown';\nimport ConversationsList from './ConversationsList';\n\nexport default class ConversationsDropdown extends NotificationsDropdown {\n  static initAttrs(attrs) {\n    attrs.label ||= app.translator.trans('neoncube-private-messages.forum.dropdown.tooltip');\n    attrs.icon ||= 'fas fa-comment-alt';\n    attrs.className = 'MessagesDropdown NotificationsDropdown';\n\n    super.initAttrs(attrs);\n  }\n\n  onclick() {\n  }\n\n  getMenu() {\n    return <form className={'Dropdown-menu ' + this.attrs.menuClassName}>{this.showing && <ConversationsList />}</form>;\n  }\n\n  getUnreadCount() {\n    return app.session.user.unreadMessages();\n  }\n\n  getNewCount() {\n    return this.getUnreadCount();\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport Message from './models/Message';\nimport Conversation from './models/Conversation';\nimport ConversationUser from './models/ConversationUser';\nimport User from 'flarum/common/models/User';\nimport Model from 'flarum/common/Model';\nimport ConversationsPage from './components/ConversationsPage';\nimport NewPrivateMessageNotification from './components/NewPrivateMessageNotification';\nimport Stream from 'flarum/common/utils/Stream';\nimport addConversationsDropdown from './addConversationsDropdown';\n\napp.initializers.add('neoncube-private-messages', (app) => {\n  app.store.models.messages = Message;\n  app.store.models.conversations = Conversation;\n  app.store.models.conversation_users = ConversationUser;\n\n  User.prototype.conversations = Model.hasMany('conversations');\n  User.prototype.unreadMessages = Model.attribute('unreadMessages');\n\n  app.notificationComponents.newPrivateMessage = NewPrivateMessageNotification;\n\n  app.routes.conversations = { path: '/conversations', component: ConversationsPage };\n  app.routes.messages = { path: '/conversations/:id', component: ConversationsPage };\n\n  addConversationsDropdown();\n\n  extend(IndexPage.prototype, 'oncreate', () => {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        if (channels.user) {\n          channels.user.bind('newMessage', (data) => {\n            app.session.user.unreadMessages = Stream(app.session.user.unreadMessages() + 1);\n            m.redraw();\n          });\n        }\n      });\n    }\n  });\n\n  extend(IndexPage.prototype, 'onremove', () => {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        if (channels.user) {\n          channels.user.unbind('newMessage');\n        }\n      });\n    }\n  });\n\n  extend(NotificationGrid.prototype, 'notificationTypes', (items) => {\n    if (!app.forum.attribute('neoncubePrivateMessagesAllowUsersToReceiveEmailNotifications'))\n      return;\n\n    items.add('newPrivateMessage', {\n      name: 'newPrivateMessage',\n      icon: 'fas fa-comment-alt',\n      label: app.translator.trans('neoncube-private-messages.forum.notifications.new_private_message'),\n    });\n  });\n});\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport ConversationsDropdown from './components/ConversationsDropdown';\n\nexport default function () {\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    // TODO: It used to be that the conversations icon was also shown if the user had any conversations, but I've commented this out,\n    // because it wasn't working, at least for me.\n    // I think a better approach would be to load a count of how many conversations a user has, instead of actually loading all conversations\n    // whenever loading a user.\n    if (app.forum.attribute('canMessage') /* || (app.session.user && app.session.user.conversations().length)*/) {\n      items.add('Messages', <ConversationsDropdown />, 20);\n    }\n  });\n}\n"],"names":["_typeof","require","_regeneratorRuntime","module","exports","e","__esModule","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","key","get","obj","prop","flarum","core","compat","_setPrototypeOf","bind","_inheritsLoose","Message","_mixin","apply","arguments","apiEndpoint","exists","data","id","mixin","Model","message","user","isHidden","createdAt","conversation","number","Conversation","messages","recipients","totalMessages","notNew","updatedAt","ConversationUser","userId","conversationId","lastRead","asyncGeneratorStep","MessageText","_Component","initAttrs","attrs","className","content","preview","_proto","view","vnode","m","oncreate","_this","updatePreview","s9e","TextFormatter","dom","updateInterval","setInterval","onremove","clearInterval","Component","ConversationView","oninit","_app$cache","_app$cache$messages2","_this$conversation$id","newMessageCount","loading","firstLoad","typingTimeout","isSending","sendTimeout","typing","messageContent","Stream","isNew","typingTimeoutInterval","setTimeout","typingInterval","typingTime","Date","now","redraw","sendTimeoutInterval","timer","map","recipient","parseInt","app","meRecipient","getMessages","object","channels","unbind","onupdate","_this2","$","scroll","scrollTop","firstMsg","offset","top","_this3","animate","children","is","decryptMessages","list","scrollMore","innerHeight","scrollHeight","_this4","avatar","trans","username","count","sort","b","myMessage","humanTime","attributes","icon","LoadingIndicator","display","size","oninput","withAttr","typingPush","placeholder","rows","disabled","onkeydown","keyCode","attribute","sendMessage","Button","onclick","_this5","url","body","_this6","replace","createRecord","save","messageContents","messageId","_this7","find","results","_app$cache$messages$_","payload","oldNumber","response","newNumber","lastUnreadMessage","unreadMessages","pushAttributes","UserListItemContent","_conversation$recipie","_vnode$attrs","session","userOnline","UserListItem","active","UserSearchSource","query","cache","conversationResults","translator","highlight","text","store","filter","q","page","limit","pushResults","result","getById","RecipientSearch","_Search","updateMaxHeight","sources","sourceItems","toArray","conversationsRecipient","classList","open","focused","loadingSources","config","element","focus","extractText","onfocus","hasFocus","onblur","onkeyup","clearTimeout","typingTimer","doSearch","in","target","addRecipient","trigger","source","_attrs","style","link","extract","recipientLabel","removeRecipient","items","ItemList","add","clear","findRecipient","Search","StartConversationModal","_Modal","conversations","already","title","stopImmediatePropagation","recpient","class","state","onsubmit","preventDefault","input","document","createElement","appendChild","select","execCommand","remove","close","Modal","ConversationsList","currentConversationId","off","on","loadMore","currentConversation","hasConversations","showModal","Link","href","show","_loadMore","_callee","_context","_next","_throw","ConversationsPage","_Page","route","param","bodyClass","Page","NewPrivateMessageNotification","_Notification","notification","subject","fromUser","Notification","ConversationsDropdown","_NotificationsDropdow","label","getMenu","menuClassName","showing","getUnreadCount","getNewCount","NotificationsDropdown","models","conversation_users","User","notificationComponents","newPrivateMessage","routes","path","component","extend","HeaderSecondary","IndexPage","pusher","NotificationGrid","forum"],"sourceRoot":""}